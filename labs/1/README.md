Лабораторная работа № 1

**«Защита от гонок в OpenMP»** 

(для группы ВМ-22м)

**Задание**

1. Написать на языке Си, скомпилировать, отладить и запустить на гибридном вычислительном кластере (ГВК) СФМЭИ **последовательную** программу вычисления суммы числового ряда: ![](Aspose.Words.ef2d9e9c-ec6a-45db-b51c-4511ddbb71a2.001.png), где ![](Aspose.Words.ef2d9e9c-ec6a-45db-b51c-4511ddbb71a2.002.png) - общий член ряда. Вариант задания (общий член ряда) выбрать в таблице (по номеру журнала). Предусмотреть вывод результата. В теле цикла выделить вычисление общего члена ряда и накапливающее суммирование членов ряда.
1. Выполнить проверку правильности вычисления суммы членов ряда, например, с помощью математических пакетов.
1. Предусмотреть замер времени вычисления суммы членов ряда. Число членов ряда *N* выбрать таким, чтобы время вычисления в последовательной программе было порядка 2- 5 сек.
1. На основе последовательной программы отладить **параллельную** программу вычисления суммы числового ряда. Использовать то же значение числа членов ряда *N,* что и в последовательной программе*.* Предусмотреть замер времени. Использовать для распараллеливания цикла директиву OpenMP: **#pragma omp for reduction *(+:<имя переменной суммирования членов ряда>)* private (<*имя переменной вычисления общего члена ряда*>).** При** этом отдельные члены ряда (локальные переменные) будут вычисляться параллельно разными нитями, а сумма (как разделяемая переменная) будет обрабатываться корректно с использованием механизма **reduction.** Сравнить результаты и время вычисления последовательной и параллельной программ.
1. Запустить параллельную программу без опции **reduction *(+:<имя переменной суммирования членов ряда>)***. Оценить результат. Убедиться, что он некорректен. Убедиться, что от запуска к запуску результат меняется.
1. В программе из пункта 5 защитить от гонок общую переменную суммы с помощью директивы **#pragma omp atomic.** Оценить результат и время вычисления.
1. В программе из пункта 5 защитить от гонок общую переменную суммы с помощью директивы **#pragma omp critical.** Оценить результат и время вычисления.
1. В программе из пункта 5 защитить от гонок общую переменную суммы с помощью механизма замков (**lock**)**.** Оценить результат и время вычисления.
1. Выполнение примеров показать преподавателю.
1. Все выполненные задания оформить в виде отчета. 
1. Отчет должен содержать: тексты примеров, команды компиляции и запуска, результаты запуска, объяснение результатов. В отчете сделать вывод о соотношении времени выполнения программы для разных механизмов защиты от гонок.
1. Отчет **в электронном виде** сдать преподавателю или направить на электронную почту: [director@sbmpei.ru]().



Таблица – Варианты заданий

|№№ по журналу |Общий член ряда ![](Aspose.Words.ef2d9e9c-ec6a-45db-b51c-4511ddbb71a2.002.png)|
| :-: | :-: |
|**19**|![](Aspose.Words.ef2d9e9c-ec6a-45db-b51c-4511ddbb71a2.003.png)|

